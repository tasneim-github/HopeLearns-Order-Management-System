{% extends "layout.html" %}

{% block title %}
    Place Your Order
{% endblock %}

{% block main %}
    <img src="static/hope_learns.jpg" alt="A happy girl" class="center-image">
    <div class="order-form-container">
        <form action="/place-order" method="post" enctype="multipart/form-data">
        <!-- Order Name -->
            <label for="order-name">Name of the Order</label>
            <input type="text" id="order-name" class="special-input" name="order_name" placeholder="Enter order name">

        <!-- Character Details -->
            <h2>Character Details</h2>
            <label for="character-part">Part to be Drawn</label>
            <select id="character-part" name="character_part">
                <option disabled selected>Choose Part</option>
                <option>Head</option>
                <option>Half Body</option>
                <option>Full Body</option>
            </select>

            <label for="preferred-style">Preferred Style</label>
            <select id="preferred-style" name="preferred_style">
                <option disabled selected>Choose Style</option>
                <option>Chibi</option>
                <option>Normal</option>
            </select>

            <label for="pose-view">Pose View</label>
            <select id="pose-view" name="pose_view">
                <option disabled selected>Choose View</option>
                <option>Front View</option>
                <option>3/4 View</option>
                <option>Side View</option>
            </select>

            <label for="pose-description">Pose Description</label>
            <textarea id="pose-description" name="pose_description" placeholder="Describe the character pose in as much detail as possible"></textarea>


            <label for="character-features-description">Character Features Description</label>
            <textarea id="character-features-description" name="character_features_description" placeholder="Describe the character features in as much detail as possible"></textarea>


            <label for="outfit-description">Outfit Description</label>
            <textarea id="outfit-description" name="outfit_description" placeholder="Describe the character outfit in as much detail as possible"></textarea>

            <label for="character-references">Character References (png / jpeg / jpg)</label>
            <input type="file" id="character-references" name="character_references[]" accept=".png, .jpeg, .jpg" multiple>
            <small class="form-note">If available, add references for the character.</small>

        <!-- Color Palette -->
            <label for="color1">Color Palette</label>
            <div>
                <div id="colorInputs" class="color-inputs">
                    <div class="color-box-container">
                        <input class="color-box" type="color" id="color1" name="colors[]" value="#ffffff">
                    </div>
                    <div class="color-box-container">
                        <input class="color-box" type="color" id="color2" name="colors[]" value="#ffffff">
                    </div>
                </div>
                <button type="button" id="addColor" class="add-color-btn">+</button>
            </div>
            <small class="form-note">Note: Some colors might change depending on the background chosen.</small>

            <script>
                const colorInputs = document.getElementById("colorInputs");
                const addColor = document.getElementById("addColor");
                let colorCount = 2;

                addColor.addEventListener("click", () => {
                    colorCount++;
                    const colorContainer = document.createElement("div");
                    colorContainer.classList.add("color-box-container");

                    const newColorInput = document.createElement("input");
                    newColorInput.type = "color";
                    newColorInput.name = "colors[]";
                    newColorInput.classList.add("color-box");
                    newColorInput.value = "#ffffff";
                    colorInputs.appendChild(newColorInput);

                    const deleteBtn = document.createElement("button");
                    deleteBtn.type = "button";
                    deleteBtn.classList.add("delete-color-btn");
                    deleteBtn.textContent = "Ã—";

                // Add event listener to delete button
                    deleteBtn.addEventListener("click", () => {
                        colorContainer.remove();
                    });

                    colorContainer.appendChild(newColorInput);
                    colorContainer.appendChild(deleteBtn);
                    colorInputs.appendChild(colorContainer);
                });

            // Add event listeners to existing delete buttons
                document.querySelectorAll(".delete-color-btn").forEach((button) => {
                    button.addEventListener("click", (event) => {
                        event.target.closest(".color-box-container").remove();
                    });
                });
            </script>

        <!-- Background -->
            <h2>Background</h2>
            <div class="radio-group">
                <label for="background-with">
                    <input type="radio" id="background-with" name="background" value="with-background">
                    With Background
                </label>

                <label for="background-without">
                    <input type="radio" id="background-without" name="background" value="without-background">
                    Without Background
                </label>
            </div>

            <div id="with-background-section">
                <label for="background-description">Background Description</label>
                <textarea id="background-description" name="background_description" placeholder="Describe the background in as much detail as possible"></textarea>

                <label for="background-references">Background References (png / jpeg / jpg)</label>
                <input type="file" id="background-references" name="background_references[]" accept=".png, .jpeg, .jpg" multiple>
                <small class="form-note">If available, add references for the background.</small>
            </div>

            <script>
                const backgroundWith = document.getElementById("background-with");
                const backgroundWithout = document.getElementById("background-without");
                const withBackgroundSection = document.getElementById("with-background-section");

                backgroundWith.addEventListener("change", () => {
                    withBackgroundSection.style.display = "flex";
                });

                backgroundWithout.addEventListener("change", () => {
                    withBackgroundSection.style.display = "none";
                });
            </script>

        <!-- Order Due Date -->
            <label for="due-date">Order Due Date</label>
            <input type="date" id="due-date" name="due_date">

        <!--Note-->
            <small class="form-note">When your order is revised and the price is decided, you will decide whether you accept or reject the price.</small>
            <small class="form-note imp"><b>WARNING: Any details that are not mentioned in the descriptions will be decided by the artist.</b></small>

        <!-- Submit -->
            <input type="submit" value="Submit Order">
        </form>
    </div>
{% endblock %}
